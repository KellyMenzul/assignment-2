<!DOCTYPE html>
<html lang="en">
<head>
   
    <title>Assignment 2</title>
    <script>
        moveTimer = null
        stepNumber = 0
       

        // ================MOVE LEFT & RIGHT=======================
        function stepLeft()
            {
                stepNumber = stepNumber + 1

                if(stepNumber > 30)
                {
                    stepNumber = 0
                }

                alien.src = "/alien/alienlwalk" + stepNumber + ".gif"
            }
        

        function stepRight()
            {
                stepNumber = stepNumber + 1

                if(stepNumber > 30)
                {
                    stepNumber = 0
                }

                alien.src = "/alien/alienrwalk" + stepNumber + ".gif"
            }

            function moveLeft()
            {

                alien.style.left = parseInt(alien.style.left) - 1 + "px"
                stepLeft()

                // stops and turns right at left edge of screen
                if(alien.style.left == -20 + "px")
                {
                    moveRight()
                    
                    clearInterval(moveTimer)
                    moveTimer = null

                    if(moveTimer == null)
                    {
                        moveTimer = setInterval(moveRight, 20)
                    }   
                }
                }


            function moveRight()
            {
                willCrashIntoBox()
                alien.style.left = parseInt(alien.style.left) + 1 + "px"
                stepRight()
                
                // stops and turns left at right edge of screen
                if(alien.style.left == 1716 + "px" )
                {
                    moveLeft()
                    
                    clearInterval(moveTimer)
                    moveTimer = null
                    
                    if(moveTimer == null)
                    {
                        moveTimer = setInterval(moveLeft, 20)
                    }   
                }
            }



       

// ================JUMP=======================
        function stopJump()
        {
            alien.style.top = parseInt(alien.style.top) + 5 + "px"
        }


        function goJump()
        {
            alien.style.top = parseInt(alien.style.top) - 5 + "px"
        }

        function alienJump()
        {
            goJump()
            setTimeout(function(){
                clearInterval(moveTimer)
                moveTimer = null
                stopJump()
            },500)

        }

       
// ===================LITTLE BOX===========================
        function moveLittleBox()
        {
            document.getElementById("box").style.left = parseInt(document.getElementById("box").style.left) + 5 + "px"
        }

        function willCrashIntoBox()
        {
            if(alien.style.left == 264 + "px" && document.getElementById("box").src == "http://127.0.0.1:5500/big_box.gif")
            {
                moveLeft()
                    
                    clearInterval(moveTimer)
                    moveTimer = null
                    
                    if(moveTimer == null)
                    {
                        moveTimer = setInterval(moveLeft, 20)
                    }   
            }

            if(alien.style.left == 264 + "px" && document.getElementById("box").src == "http://127.0.0.1:5500/little_box.gif")
            {
                moveLittleBox()
                clearInterval(moveTimer)


                
            }
        }




// ================MAIN FUNCTION=======================
        function keyMoving(e)
        {
            //===========MOVE LEFT RIGHT================
            if(e.which == 39) //RIGHT
                {
                    clearInterval(moveTimer)
                    moveTimer = null

                    if(moveTimer == null)
                    {
                        moveTimer = setInterval(moveRight, 20)
                    }
                    
                    
                }

                else if(e.which == 37) //LEFT
                {
                    clearInterval(moveTimer)
                    moveTimer = null

                    if(moveTimer == null)
                    {
                        moveTimer = setInterval(moveLeft, 20)
                    }
                }

                else if(e.which == 40) // DOWN
                {
                        clearInterval(moveTimer)
                        moveTimer = null
                }


            //==========JUMP===============
            if(e.which == 38) // UP 
            {
                clearInterval(moveTimer)
                moveTimer = null

                if(moveTimer == null)
                {
                    moveTimer = setInterval(alienJump,20)
                }
                
            }
        }

    

        window.onload=function()
        {
            willCrashIntoBox()
            let alien = document.getElementById('alien')
            let BoxImage = document.getElementById('box')
            window.onkeydown=keyMoving
            console.log(document.getElementById("box").src)
        }
    </script>
</head>
<body>
    <img src="/alien/alienlwalk0.gif" id="alien" style="position:absolute;top:20px; left:200px;">
    <img src="little_box.gif" id="box" style="position: absolute; left: 320px; top:20px; width:50px;">
</body>
</html>